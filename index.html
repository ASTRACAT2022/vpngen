<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASTRACAT - Cyber Security</title>
    
    <!-- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –º–µ—Ç–∞-—Ç–µ–≥ —Ç–æ–ª—å–∫–æ –¥–ª—è GitHub Pages -->
    <script>
        if (window.location.hostname.includes('github.io')) {
            document.write('<meta http-equiv="refresh" content="0;url=https://vpngen.vercel.app">');
        }
    </script>
    
    <!-- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ JavaScript —Ç–æ–ª—å–∫–æ –¥–ª—è GitHub Pages -->
    <script>
        if (window.location.hostname.includes('github.io')) {
            window.location.replace('https://vpngen.vercel.app');
        }
    </script>
    
    <!-- Cloudflare Turnstile -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    
    <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H70JMJMHTT"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-H70JMJMHTT');
    </script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

       ym(100530848, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
       });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/100530848" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

    <!-- Vercel Speed Insights -->
    <script src="https://va.vercel-scripts.com/v1/speed-insights/prj_iTrHuT73QqribP3OsrvRhixAal7o"></script>

    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link href="https://fonts.googleapis.com/css2?family=Oxanium:wght@400;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --neon: #ff4655;
            --cyber-dark: #0a0a12;
            --cyber-surface: #161620;
            --cyber-border: #2a2a3a;
            --glow: 0 0 15px var(--neon);
            --font-primary: 'Oxanium', sans-serif;
            --font-code: 'JetBrains Mono', monospace;
        }

        body {
            margin: 0;
            background: var(--cyber-dark);
            color: #fff;
            font-family: var(--font-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(transparent 90%, rgba(255,70,85,0.1)),
                repeating-linear-gradient(
                    0deg,
                    rgba(255,255,255,0.05) 0px,
                    rgba(255,255,255,0.05) 1px,
                    transparent 1px,
                    transparent 4px
                );
            pointer-events: none;
            z-index: -1;
        }

        .cyber-btn {
            padding: 1rem 2rem;
            background: none;
            border: 2px solid var(--neon);
            color: var(--neon);
            font-family: var(--font-primary);
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: 0.3s;
            clip-path: polygon(15% 0, 100% 0, 85% 100%, 0 100%);
            margin: 0.5rem;
        }

        .cyber-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, var(--neon), transparent);
            animation: btn-glitch 3s infinite linear;
            opacity: 0.3;
        }

        .cyber-btn:hover {
            background: rgba(255,70,85,0.1);
            box-shadow: var(--glow);
            transform: translateY(-2px);
        }

        .config-card {
            background: var(--cyber-surface);
            border: 2px solid var(--cyber-border);
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
            transition: 0.3s;
            max-width: 800px;
            margin: 2rem auto;
        }

        .config-content {
            font-family: var(--font-code);
            background: #000;
            padding: 1.5rem;
            margin: 1rem 0;
            border-left: 3px solid var(--neon);
            position: relative;
            overflow-x: auto;
            white-space: nowrap;
        }

        #captcha-overlay {
            position: fixed;
            inset: 0;
            background: rgba(10, 10, 10, 0.98);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(20px);
            z-index: 1000;
        }

        .captcha-container {
            background: var(--cyber-surface);
            padding: 3rem;
            border: 2px solid var(--neon);
            clip-path: polygon(20px 0, 100% 0, calc(100% - 20px) 100%, 0 100%);
            text-align: center;
        }

        .instruction-banner {
            background: var(--cyber-surface);
            border: 2px solid var(--neon);
            padding: 2rem;
            margin: 3rem auto;
            position: relative;
            max-width: 800px;
        }

        .instruction-banner::after {
            content: '‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï';
            position: absolute;
            top: -15px;
            left: 20px;
            background: var(--cyber-dark);
            padding: 0 1rem;
            color: var(--neon);
        }

        .qr-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(20px);
        }

        .qr-content {
            background: var(--cyber-surface);
            border: 2px solid var(--neon);
            padding: 2rem;
            position: relative;
            clip-path: polygon(20px 0, 100% 0, calc(100% - 20px) 100%, 0 100%);
            text-align: center;
        }

        #clock {
            min-width: 120px;
            text-align: center;
        }

        @keyframes btn-glitch {
            0% { transform: translate(-10%, -10%) rotate(45deg); }
            100% { transform: translate(110%, 110%) rotate(45deg); }
        }

        @media (max-width: 768px) {
            .config-card, .instruction-banner {
                margin: 1rem;
                padding: 1rem;
            }
            
            .cyber-btn {
                padding: 0.8rem 1.2rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body data-theme="dark">
    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è GitHub Pages, –µ—Å–ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª -->
    <div id="redirect-message" style="display: none; text-align: center; padding: 2rem;">
        <h1>–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...</h1>
        <p>–í—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç–µ—Å—å –Ω–∞ –Ω–æ–≤—ã–π —Å–∞–π—Ç. –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ, <a href="https://vpngen.vercel.app" style="color: #ff4655;">–Ω–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å</a>.</p>
    </div>

    <!-- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è Vercel -->
    <div id="captcha-overlay">
        <div class="captcha-container">
            <h1>üîí –ü–†–û–í–ï–†–ö–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò</h1>
            <div class="cf-turnstile" 
                 data-sitekey="0x4AAAAAABLgaFLEZGcqAM3Q"
                 data-callback="onCaptchaSuccess"
                 data-error-callback="onCaptchaError"
                 data-expired-callback="onCaptchaExpired"></div>
        </div>
    </div>

    <div id="main-content" style="display: none;">
        <div class="controls">
            <button class="cyber-btn" id="themeToggle">üåì –°–ú–ï–ù–ê –¢–ï–ú–´</button>
            <div class="cyber-btn" id="clock">00:00:00</div>
            <button class="cyber-btn" onclick="fetchConfigFromAPI()">–ù–û–í–´–ô –ö–û–ù–§–ò–ì</button>
        </div>

        <div class="instruction-banner">
            <h2>üì° –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ù–ê–°–¢–†–û–ô–ö–ï</h2>
            <p><strong>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏:</strong></p>
            <ul>
                <li>–¢–∏–ø: SOCKS5</li>
                <li>–ê–¥—Ä–µ—Å: 85.209.2.112</li>
                <li>–ü–æ—Ä—Ç: 7777</li>
                <li>–õ–æ–≥–∏–Ω/–ü–∞—Ä–æ–ª—å: astranet</li>
            </ul>
            <p><strong>–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π:</strong> –ö–ª—é—á–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ API. –ù–∞–∂–º–∏—Ç–µ ¬´–ù–û–í–´–ô –ö–û–ù–§–ò–ì¬ª –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–ª—é—á–∞.</p>
        </div>

        <div class="config-card">
            <h3>‚ö° –ê–ö–¢–ò–í–ù–´–ô –ö–û–ù–§–ò–ì</h3>
            <div class="config-content" id="configOutput">–ù–∞–∂–º–∏—Ç–µ ¬´–ù–û–í–´–ô –ö–û–ù–§–ò–ì¬ª –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–∞...</div>
            <div style="display: flex; justify-content: center; gap: 1rem;">
                <button class="cyber-btn" onclick="copyConfig()">–ö–û–ü–ò–†–û–í–ê–¢–¨</button>
                <button class="cyber-btn" onclick="showQR()">–ü–û–ö–ê–ó–ê–¢–¨ QR</button>
            </div>
        </div>
    </div>

    <div id="qr-modal" class="qr-modal">
        <div class="qr-content">
            <h2>üì≤ QR –î–õ–Ø –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø</h2>
            <img id="qr-image" src="" alt="QR Code" style="max-width: 250px;">
            <button class="cyber-btn" onclick="closeQR()" style="margin-top: 1.5rem;">–ó–ê–ö–†–´–¢–¨</button>
        </div>
    </div>

    <script>
        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è GitHub Pages
        if (window.location.hostname.includes('github.io')) {
            document.getElementById('redirect-message').style.display = 'block';
            document.getElementById('captcha-overlay').style.display = 'none';
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('qr-modal').style.display = 'none';
        }

        let currentConfig = '';

        function onCaptchaSuccess(token) {
            console.log('CAPTCHA Success, token:', token);
            try {
                const captchaOverlay = document.getElementById('captcha-overlay');
                const mainContent = document.getElementById('main-content');
                if (captchaOverlay && mainContent) {
                    console.log('Hiding captcha-overlay and showing main-content');
                    captchaOverlay.style.display = 'none';
                    mainContent.style.display = 'block';
                    fetchConfigFromAPI();
                } else {
                    console.error('DOM elements not found:', {
                        captchaOverlay: !!captchaOverlay,
                        mainContent: !!mainContent
                    });
                    alert('–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                }
            } catch (error) {
                console.error('Error in onCaptchaSuccess:', error);
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: ' + error.message);
            }
        }

        function onCaptchaError(error) {
            console.error('CAPTCHA Error:', error);
            alert('–û–®–ò–ë–ö–ê –ü–†–û–í–ï–†–ö–ò! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
        }

        function onCaptchaExpired() {
            console.log('CAPTCHA Expired');
            alert('–°–ï–°–°–ò–Ø –ò–°–¢–ï–ö–õ–ê! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
        }

        async function fetchConfigFromAPI(retryCount = 3, delay = 2000) {
            try {
                const configOutput = document.getElementById('configOutput');
                if (!configOutput) {
                    console.error('configOutput element not found');
                    return;
                }

                configOutput.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞ –∫–ª—é—á–∞...';
                const response = await fetch('https://astraapi-gntv.onrender.com', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'text/plain'
                    }
                });

                if (response.ok) {
                    let config = await response.text();
                    // –û—á–∏—Å—Ç–∫–∞ –∫–ª—é—á–∞ –æ—Ç –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ (–ø—Ä–æ–±–µ–ª—ã, \n, \r)
                    config = config.trim();
                    if (!config.startsWith('vless://')) {
                        throw new Error('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞');
                    }
                    currentConfig = config;
                    configOutput.textContent = decodeURIComponent(config);
                    console.log('Fetched config:', config);
                } else if (response.status === 404) {
                    configOutput.textContent = '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–ª—é—á–µ–π. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.';
                    currentConfig = '';
                    console.warn('API returned 404: No VPN keys available');
                } else {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                console.error('Error in fetchConfigFromAPI:', error);
                if (retryCount > 0) {
                    console.log(`Retrying... (${retryCount} attempts left)`);
                    setTimeout(() => fetchConfigFromAPI(retryCount - 1, delay * 2), delay);
                } else {
                    document.getElementById('configOutput').textContent = '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.';
                    currentConfig = '';
                }
            }
        }

        function copyConfig() {
            if (!currentConfig) {
                alert('–ù–µ—Ç –∫–ª—é—á–∞ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è. –ù–∞–∂–º–∏—Ç–µ ¬´–ù–û–í–´–ô –ö–û–ù–§–ò–ì¬ª.');
                return;
            }
            navigator.clipboard.writeText(currentConfig).then(() => {
                alert('–ö–æ–Ω—Ñ–∏–≥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä!');
            }).catch(err => {
                console.error('Error copying config:', err);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥–∞.');
            });
        }

        function showQR() {
            if (!currentConfig) {
                alert('–ù–µ—Ç –∫–ª—é—á–∞ –¥–ª—è QR-–∫–æ–¥–∞. –ù–∞–∂–º–∏—Ç–µ ¬´–ù–û–í–´–ô –ö–û–ù–§–ò–ì¬ª.');
                return;
            }
            try {
                const qrModal = document.getElementById('qr-modal');
                const qrImage = document.getElementById('qr-image');
                if (qrModal && qrImage) {
                    qrModal.style.display = 'flex';
                    qrImage.src = `https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(currentConfig)}&size=250x250`;
                } else {
                    console.error('QR modal elements not found');
                }
            } catch (error) {
                console.error('Error in showQR:', error);
            }
        }

        function closeQR() {
            const qrModal = document.getElementById('qr-modal');
            if (qrModal) {
                qrModal.style.display = 'none';
            } else {
                console.error('QR modal not found');
            }
        }

        document.getElementById('themeToggle').addEventListener('click', () => {
            const currentTheme = document.body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.body.setAttribute('data-theme', newTheme);
            console.log('Theme switched to:', newTheme);
        });

        function updateClock() {
            const now = new Date();
            document.getElementById('clock').textContent = 
                `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
        }
        setInterval(updateClock, 1000);
        updateClock();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'935cb6ca8a45aff5',t:'MTc0NTU3MjI5Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>
